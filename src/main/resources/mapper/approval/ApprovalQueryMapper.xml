<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.piveguyz.empickbackend.approvals.approval.query.mapper.ApprovalQueryMapper">
    <resultMap id="ApprovalResultMap" type="com.piveguyz.empickbackend.approvals.approval.query.dto.ApprovalQueryDTO">
        <id column="id" property="id"/>
        <result column="category_id" property="categoryId"/>
        <result column="writer_id" property="writerId"/>
        <result column="created_at" property="createdAt"/>
        <result column="status" property="status"/>
        <result column="approver1_id" property="approver1Id"/>
        <result column="approver2_id" property="approver2Id"/>
        <result column="approver3_id" property="approver3Id"/>
        <result column="approver4_id" property="approver4Id"/>
        <result column="approved_at1" property="approvedAt1"/>
        <result column="approved_at2" property="approvedAt2"/>
        <result column="approved_at3" property="approvedAt3"/>
        <result column="approved_at4" property="approvedAt4"/>

    </resultMap>

    <select id="findAll" resultMap="ApprovalResultMap">
        SELECT
            id,
            category_id,
            writer_id,
            created_at,
            status,
            approver1_id,
            approver2_id,
            approver3_id,
            approver4_id,
            approved_at1,
            approved_at2,
            approved_at3,
            approved_at4
        FROM approval;
    </select>

    <select id="findById" resultMap="ApprovalResultMap">
        SELECT
            id,
            category_id,
            writer_id,
            created_at,
            status,
            approver1_id,
            approver2_id,
            approver3_id,
            approver4_id,
            approved_at1,
            approved_at2,
            approved_at3,
            approved_at4
        FROM approval
        WHERE id = #{id};
    </select>

    <select id="findByCategoryId" resultMap="ApprovalResultMap">
        SELECT
            id,
            category_id,
            writer_id,
            created_at,
            status,
            approver1_id,
            approver2_id,
            approver3_id,
            approver4_id,
            approved_at1,
            approved_at2,
            approved_at3,
            approved_at4
        FROM approval
        WHERE category_id = #{categoryId};
    </select>

    <select id="findByWriterId" resultMap="ApprovalResultMap">
        SELECT
            id,
            category_id,
            writer_id,
            created_at,
            status,
            approver1_id,
            approver2_id,
            approver3_id,
            approver4_id,
            approved_at1,
            approved_at2,
            approved_at3,
            approved_at4
        FROM approval
        WHERE writer_id = #{writerId};
    </select>


</mapper>